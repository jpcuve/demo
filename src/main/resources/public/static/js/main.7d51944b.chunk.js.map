{"version":3,"sources":["remote.tsx","api.tsx","component/SignOutButton.tsx","page/Outline.tsx","page/HomePage.tsx","page/TestPage.tsx","component/SignInForm.tsx","domain.tsx","store.ts","component/SocialSignInPanel.tsx","page/SignInPage.tsx","component/SignUpForm.tsx","page/SignUpPage.tsx","component/UpdatePasswordForm.tsx","page/UpdatePasswordPage.tsx","component/ResetPasswordForm.tsx","page/ResetPasswordPage.tsx","component/StatementTable.tsx","page/StatementPage.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["BASE_URL","window","location","port","protocol","host","console","debug","client","rpc","endPoint","a","method","contentType","body","options","headers","token","localStorage","getItem","credentials","JSON","stringify","fetch","res","ok","Error","status","statusText","json","error","get","this","post","data","postForm","form","undefined","put","delete","getApi","dispatch","wrap","fn","type","errors","fetching","message","flash","setTimeout","signIn","email","password","socialSignIn","social","identity","signUp","name","signOut","updatePassword","newPassword","newPasswordConfirmation","resetPassword","perpetual","statement","instructions","log","SignOutButton","props","api","useDispatch","handleClick","gapi","auth2","getAuthInstance","onCompleted","onClick","Outline","useSelector","state","profile","account","bank","className","map","key","to","history","push","children","HomePage","TestPage","count","counter","defaultFormData","SignInForm","React","useState","formData","setFormData","handleChange","e","target","value","handleSubmit","preventDefault","noValidate","onSubmit","onChange","defaultPosition","defaultApplicationState","identified","roles","id","bankId","shortPositionLimit","opening","settlementCompletionTarget","closing","minimumPayIn","currencyGroups","currencies","store","createStore","action","then","subscribe","setItem","getState","SocialSignInPanel","onSignIn","googleUser","getBasicProfile","getId","getName","getImageUrl","getEmail","getAuthResponse","id_token","useEffect","signin2","render","SignInPage","signInCompleted","SignUpForm","SignUpPage","signUpCompleted","UpdatePasswordForm","UpdatePasswordPage","ResetPasswordForm","ResetPasswordPage","StatementTable","currency","colSpan","coin","instruction","bookId","booked","partyIds","rawAmount","amount","dbAmount","crAmount","crId","toFixed","reference","StatementPage","App","exact","path","component","Boolean","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.7d51944b.chunk.js","sourcesContent":["const BASE_URL = window.location.port === '3000' ? 'http://localhost:8080' : `${window.location.protocol}//${window.location.host}`\r\nconsole.debug(`Base URL for RPC: ${BASE_URL}`)\r\n\r\nconst client: any = {\r\n  rpc: async function (endPoint: string, method: string = 'GET', contentType: string = '', body: any | null = null ): Promise<any> {\r\n    const options: any = {\r\n      method,\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        // 'Authorization': 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJKb2UiLCJyb2xlcyI6ImEsYixjIn0.E89yUJXwD41GWgYKIzC8Kb6AHCss2nUVcKVNqa1MsXI',\r\n      },\r\n      // credentials: 'include',\r\n    };\r\n    const token = localStorage.getItem('TOKEN') || ''\r\n    if (token){\r\n      options.headers['Authorization'] = `Bearer ${token}`\r\n      options.credentials = 'include'\r\n    }\r\n    if (body){\r\n      if (contentType){\r\n        options.headers['Content-Type'] = contentType\r\n      }\r\n      options.body = body;\r\n    }\r\n    console.debug(JSON.stringify(options))\r\n    const res = await fetch(`${BASE_URL}${endPoint}`, options)\r\n    if (!res.ok){\r\n      throw Error(`Http error: ${res.status} ${res.statusText}`)\r\n    }\r\n    const json = await res.json()\r\n    console.debug(JSON.stringify(json))\r\n    if ('error' in json) {\r\n      throw Error(json.error)\r\n    }\r\n    return json;\r\n  },\r\n  get: async function(endPoint: string): Promise<any> { \r\n    return await this.rpc(endPoint)\r\n  } ,\r\n  post: async function(endPoint: string, data: any): Promise<any> { \r\n    return await this.rpc(endPoint, 'POST', 'application/json', JSON.stringify(data))\r\n  },\r\n  postForm: async function(endPoint: string, form: FormData): Promise<any> { \r\n    return await this.rpc(endPoint, 'POST', undefined, form)\r\n  },  // contentType: undefined so boundary is correctly set\r\n  put: async function(endPoint: string, data: any): Promise<any> { \r\n    return await this.rpc(endPoint, 'PUT', 'application/json', JSON.stringify(data))\r\n  },\r\n  delete: async function(endPoint: string): Promise<any> { \r\n    return await this.rpc(endPoint, 'DELETE')\r\n  }\r\n}\r\n\r\nexport default client\r\n\r\n","import client from \"./remote\"\r\nimport { Dispatch } from \"react\"\r\nimport { AnyAction } from \"redux\"\r\nimport { Token, Perpetual, Instruction } from \"./domain\"\r\n\r\nconst AUTH_BASE = '/auth'\r\nconst MASTER_BASE = '/master'\r\n\r\nexport const getApi = (dispatch: Dispatch<AnyAction>) => {\r\n  const wrap: <T>(fn: () => Promise<T|undefined>) => Promise<T|undefined> = async (fn) => {\r\n    dispatch({ type: 'update-errors', errors: [] })\r\n    dispatch({ type: 'update-fetching', fetching: true })\r\n    try {\r\n      return await fn()\r\n    } catch (e) {\r\n      dispatch({ type: 'update-errors', errors: [e.message] })\r\n    } finally {\r\n      dispatch({ type: 'update-fetching', fetching: false })\r\n    }\r\n  }\r\n\r\n  return {\r\n    flash: (message: string) => {\r\n      dispatch({type: 'update-flash', flash: message })\r\n      setTimeout(() => {\r\n        dispatch({type: 'update-flash', flash: 'Ready'})\r\n      }, 3000)\r\n    },\r\n    signIn: async (email: string, password: string) => wrap<Token>(async () => {\r\n      const token: Token = await client.post(`${AUTH_BASE}/sign-in`, { email, password })\r\n      dispatch({ type: 'update-token', token: token.token })\r\n      return token\r\n    }),\r\n    socialSignIn: async (social: string, identity: string) => wrap<Token>(async () => {\r\n      const token: Token = await client.post(`${AUTH_BASE}/social-sign-in`, {social, identity})\r\n      dispatch({ type: 'update-token', token: token.token })\r\n      return token\r\n    }),\r\n    signUp: async (email: string, password: string, name: string) => wrap<void>(async () => {\r\n      await client.post(`${AUTH_BASE}/sign-up`, { email, password, name })\r\n    }),\r\n    signOut: async () => wrap<Token>(async () => {\r\n      const token: Token = await client.get(`${AUTH_BASE}/sign-out`)\r\n      dispatch({ type: 'update-token', token: token.token })\r\n      return token\r\n    }),\r\n    updatePassword: async (newPassword: string, newPasswordConfirmation: string) => wrap<void>(async () => {\r\n      await client.post(`${AUTH_BASE}/update-password`, { newPassword, newPasswordConfirmation })\r\n    }),\r\n    resetPassword: async (email: string) => wrap<void>(async () => {\r\n      await client.post(`${AUTH_BASE}/reset-password`, { email })\r\n    }),\r\n    perpetual: async () => wrap<Perpetual>(async () => {\r\n      const perpetual: Perpetual = await client.get(`${MASTER_BASE}/perpetual`)\r\n      dispatch({ type: 'update-perpetual', perpetual })\r\n      return perpetual\r\n    }),\r\n    statement: async () => wrap<Instruction[]>(async () => {\r\n      const instructions: Instruction[] = await client.get(`${MASTER_BASE}/statement`)\r\n      dispatch({ type: 'update-instructions', instructions})\r\n      return instructions\r\n    }),\r\n    error: async () => wrap<any>(async () => {\r\n      const data: any = await client.get(`${AUTH_BASE}/error`)\r\n      console.log(JSON.stringify(data))\r\n      return data\r\n    })\r\n  }\r\n}","import React from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { getApi } from '../api'\r\nimport { FormProps } from '..'\r\ndeclare const gapi: any\r\n\r\nconst SignOutButton: React.FC<FormProps> = props => {\r\n  const api = getApi(useDispatch())\r\n  const handleClick = async () => {\r\n    api.signOut()\r\n    if (gapi.auth2){\r\n      const auth2 = gapi.auth2.getAuthInstance()\r\n      await auth2.signOut()\r\n    } \r\n    console.log('User signed out.')\r\n    props.onCompleted()\r\n  }\r\n  return (\r\n    <button onClick={handleClick}>Sign-out</button>\r\n  )\r\n}\r\n\r\nexport default SignOutButton","import React from 'react'\r\nimport { RouteComponentProps, Link } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport { ApplicationState } from '../store'\r\nimport { Perpetual } from '../domain'\r\nimport SignOutButton from '../component/SignOutButton'\r\n\r\nconst Outline: React.FC<RouteComponentProps> = props => {\r\n  const token = useSelector<ApplicationState, string>(state => state.token)\r\n  const errors = useSelector<ApplicationState, string[]>(state => state.errors)\r\n  const flash = useSelector<ApplicationState, string>(state => state.flash)\r\n  const fetching = useSelector<ApplicationState, boolean>(state => state.fetching)\r\n  const perpetual = useSelector<ApplicationState, Perpetual>(state => state.perpetual)\r\n  const signOutCompleted = () => {\r\n    props.history.push('/')\r\n  }\r\n  return (\r\n    <div>\r\n      {token && <div>User: {perpetual.profile.name} &nbsp; Account: {perpetual.account.name} &nbsp; Bank: {perpetual.bank.name}</div>}\r\n      {!token && <div>Public</div>}\r\n      {flash && <div className=\"flash\">{flash}</div>}\r\n      <div>\r\n        <ul className='error'>\r\n          {errors.map(error => {\r\n            return (\r\n              <li key={error}>{error}</li>\r\n            );\r\n          })}\r\n        </ul>\r\n        {fetching && <span>Fetching...</span>}\r\n      </div>\r\n      <div className=\"left\">\r\n        <nav>\r\n          <ul>\r\n            <li><Link to=\"/home\">Home</Link></li>\r\n            <li>\r\n              <span>Auth</span>\r\n              <ul>\r\n                {!token && <li ><Link to=\"/sign-in\">Sign-in</Link></li>}\r\n                {!token && <li><Link to=\"/sign-up\">Sign-up</Link></li>}\r\n                {token && <li><Link to=\"/update-password\">Update password</Link></li>}\r\n                {token && <li><Link to=\"/reset-password\">Reset password</Link></li>}\r\n              </ul>\r\n            </li>\r\n            {token && <li><Link to=\"/statement\">Statement</Link></li>}\r\n            <li><Link to=\"/test\">Test</Link></li>\r\n          </ul>\r\n        </nav>\r\n        {token && <SignOutButton onCompleted={signOutCompleted}/>}\r\n      </div>      \r\n      <div className=\"right\">\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Outline","import React from 'react'\r\nimport Outline from './Outline'\r\nimport { PageProps } from '..'\r\nimport { useSelector } from 'react-redux'\r\nimport { ApplicationState } from '../store'\r\n\r\n\r\nconst HomePage: React.FC<PageProps> = props => {\r\n  const token = useSelector<ApplicationState, string>(state => state.token)\r\n\treturn (\r\n\t\t<Outline {...props}>\r\n\t\t\t{token &&\r\n\t\t\t<div>\r\n\t\t\t\t<h1>You are logged in</h1>\r\n\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{!token &&\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Public web site</h1>\r\n\t\t\t</div>\r\n\t\t\t}\r\n\t\t</Outline>\r\n\t)\r\n}\r\n\r\nexport default HomePage","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getApi } from '../api'\r\nimport { ApplicationState } from '../store'\r\nimport { PageProps } from '..'\r\nimport Outline from './Outline'\r\n\r\nconst TestPage: React.FC<PageProps> = props => {\r\n  const api = getApi(useDispatch())\r\n\tconst count = useSelector<ApplicationState, number>(state => state.counter)\r\n\tconst dispatch = useDispatch()\r\n  return (\r\n    <Outline {...props}>\r\n\t\t\t<div>Count: {count}</div>\r\n\t\t\t<button onClick={() => dispatch({ type: 'increment-counter' })}>Increment</button>\r\n      <br/>\r\n      <button onClick={() => api.perpetual()}>Test</button>\r\n      <br/>\r\n      <button onClick={() => api.error()}>Error</button>\r\n    </Outline>\r\n  )\r\n}\r\n\r\nexport default TestPage","import React from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { getApi } from '../api'\r\nimport { FormProps } from '..'\r\n\r\ninterface FormData {\r\n  email: string,\r\n  password: string,\r\n}\r\n\r\nconst defaultFormData: FormData = {\r\n  email: '',\r\n  password: ''\r\n}\r\n\r\nconst SignInForm: React.FC<FormProps> = props => {\r\n  const api = getApi(useDispatch())\r\n  const [formData, setFormData] = React.useState<FormData>(defaultFormData)\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => setFormData({ ...formData, [e.target.name]: e.target.value })\r\n  const handleSubmit = async (e: React.SyntheticEvent) => {\r\n      e.preventDefault()\r\n      const token = await api.signIn(formData.email, formData.password)\r\n      console.debug(`Logged in as: ${token}`)\r\n      props.onCompleted()\r\n  }\r\n\r\n  return (\r\n    <form noValidate onSubmit={handleSubmit}>\r\n        <h1>Sign-in</h1>\r\n        <p>\r\n          <label>Username<br/>\r\n            <input name=\"email\" value={formData.email} onChange={handleChange} />\r\n          </label>\r\n        </p>\r\n        <p>\r\n          <label>Password<br/>\r\n            <input name=\"password\" value={formData.password} type=\"password\" onChange={handleChange} />\r\n          </label>\r\n        </p>\r\n        <button type=\"submit\">Sign-in</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default SignInForm","const defaultLocalTime = '00:00:00'\r\n\r\nexport interface Token {\r\n  token: string,\r\n}\r\n\r\nexport const defaultToken: Token = {\r\n  token: '',\r\n}\r\n\r\nexport interface Profile {\r\n  identified: boolean,\r\n  name: string,\r\n  roles: string[],\r\n}\r\n\r\nexport const defaultProfile: Profile = {\r\n  identified: false,\r\n  name: '<anonymous>',\r\n  roles: [],\r\n}\r\n\r\nexport interface CurrencyGroup {\r\n  id: number,\r\n  name: string,\r\n  priority: number,\r\n}\r\n\r\nexport const defaultCurrencyGroup: CurrencyGroup = {\r\n  id: 0,\r\n  name: 'DEFAULT',\r\n  priority: 0,\r\n}\r\n\r\nexport interface Position {\r\n\r\n}\r\n\r\nexport const defaultPosition: Position = {\r\n\r\n}\r\n\r\nexport interface Bank {\r\n  id: number,\r\n  name: string,\r\n  opening: string,\r\n  settlementCompletionTarget: string,\r\n  closing: string,\r\n  minimumPayIn : Position,\r\n}\r\n\r\nexport const defaultBank: Bank = {\r\n  id: 0,\r\n  name: 'DEFAULT_BANK',\r\n  opening: defaultLocalTime,\r\n  settlementCompletionTarget: defaultLocalTime,\r\n  closing: defaultLocalTime,\r\n  minimumPayIn : defaultPosition,\r\n}\r\n\r\nexport interface Account {\r\n  id: number,\r\n  bankId: number,\r\n  name: string,\r\n  shortPositionLimit: Position,\r\n}\r\n\r\nexport const defaultAccount: Account = {\r\n  id: 0,\r\n  bankId: 0,\r\n  name: 'DEFAULT_ACCOUNT',\r\n  shortPositionLimit: defaultPosition,\r\n}\r\n\r\nexport interface Currency {\r\n  id: number,\r\n  bankId: number,\r\n  currencyGroupId: number,\r\n  coin: string,\r\n  opening: string,\r\n  fundingCompletionTarget: string,\r\n  closing: string,\r\n  close: string,\r\n}\r\n\r\nexport const defaultCurrency: Currency = {\r\n  id: 0,\r\n  bankId: 0,\r\n  currencyGroupId: 0,\r\n  coin: 'XXX',\r\n  opening: defaultLocalTime,\r\n  fundingCompletionTarget: defaultLocalTime,\r\n  closing: defaultLocalTime,\r\n  close: defaultLocalTime,\r\n}\r\n\r\nexport interface Perpetual {\r\n  profile: Profile,\r\n  account: Account,\r\n  bank: Bank,\r\n  currencyGroups: CurrencyGroup[],\r\n  currencies: Currency[]\r\n}\r\n\r\nexport const defaultPerpetual: Perpetual = {\r\n  profile: defaultProfile,\r\n  account: defaultAccount,\r\n  bank: defaultBank,\r\n  currencyGroups: [],\r\n  currencies: [],\r\n}\r\n\r\nexport interface Instruction {\r\n  id: number,\r\n  dbId: number,\r\n  crId: number,\r\n  partyIds: number[],\r\n  bookId: number,\r\n  booked: string,\r\n  type: string,\r\n  reference: string,\r\n  amount: { [key:string]:number }\r\n}\r\n\r\nexport const defaultInstruction: Instruction = {\r\n  id: 0,\r\n  dbId: 0,\r\n  crId: 0,\r\n  partyIds: [0, 0],\r\n  bookId: 0,\r\n  booked: '00:00:00',\r\n  type: '',\r\n  reference: '',\r\n  amount: {}\r\n}","import { AnyAction, createStore } from \"redux\"\r\nimport { Perpetual, defaultPerpetual, Instruction } from \"./domain\"\r\nimport client from \"./remote\"\r\n\r\nexport interface ApplicationState {\r\n  fetching: boolean,\r\n  errors: string[],\r\n  flash: string,\r\n  token: string,\r\n  counter: number,\r\n  perpetual: Perpetual,\r\n  instructions: Instruction[],\r\n}\r\n\r\nconst defaultApplicationState: ApplicationState = {\r\n  fetching: false,\r\n  errors: [],\r\n  flash: 'Ready',\r\n  token: '',\r\n  counter: 0,\r\n  perpetual: defaultPerpetual,\r\n  instructions: [],\r\n}\r\n\r\nconst rootReducer = (state: ApplicationState = defaultApplicationState, action: AnyAction) => {\r\n  console.log(`Reducer is called, state: ${JSON.stringify(state)} action: ${JSON.stringify(action)}`)\r\n  switch (action.type) {\r\n    case 'increment-counter':\r\n      return { ...state, counter: state.counter + 1 }\r\n    case 'update-token':\r\n      return { ...state, token: action.token }\r\n    case 'update-fetching':\r\n      return { ...state, fetching: action.fetching }\r\n    case 'update-errors':\r\n      return { ...state, errors: action.errors }\r\n    case 'update-flash':\r\n      return { ...state, flash: action.flash }\r\n    case 'update-perpetual':\r\n      return { ...state, perpetual: action.perpetual }\r\n    case 'update-instructions':\r\n      return { ...state, instructions: action.instructions }\r\n  }\r\n  return state\r\n}\r\n\r\nconst token = localStorage.getItem('TOKEN') || ''\r\nexport const store = createStore(rootReducer, { ...defaultApplicationState, token })\r\nif (token){\r\n  client.get(`/master/perpetual`).then((perpetual: Perpetual) => store.dispatch({type: 'update-perpetual', perpetual}))\r\n}\r\nstore.subscribe(() => {\r\n  localStorage.setItem('TOKEN', store.getState().token)\r\n})\r\n\r\n","import React from 'react'\r\nimport { getApi } from '../api'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { ApplicationState } from '../store'\r\nimport { FormProps } from '..'\r\ndeclare const gapi: any\r\n\r\nconst SocialSignInPanel: React.FC<FormProps> = props => {\r\n  const api = getApi(useDispatch())\r\n  const token = useSelector<ApplicationState, string>(state => state.token)\r\n  const onSignIn = async (googleUser: any) => {\r\n    const profile = googleUser.getBasicProfile()\r\n    console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.\r\n    console.log('Name: ' + profile.getName());\r\n    console.log('Image URL: ' + profile.getImageUrl());\r\n    console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.\r\n    const identity = googleUser.getAuthResponse().id_token\r\n    console.log(`Google user token: ${identity}`)\r\n    await api.socialSignIn('google', identity)\r\n    props.onCompleted()\r\n  }\r\n  React.useEffect(() => {\r\n    if (!token){\r\n      console.log(`Setting-up google sign-in button`)\r\n      gapi.signin2.render('google-sign-in', {\r\n        'scope': 'profile email',\r\n        'longtitle': true,\r\n        'theme': 'dark',\r\n        'onsuccess': onSignIn,\r\n        // 'onfailure': props.onFailure\r\n      })\r\n    }\r\n  }, [token])\r\n  return (\r\n    <div>\r\n      {!token && <div id=\"google-sign-in\"></div>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SocialSignInPanel","import React from 'react'\r\nimport { PageProps } from '..'\r\nimport SignInForm from '../component/SignInForm'\r\nimport Outline from './Outline'\r\nimport { getApi } from '../api'\r\nimport { useDispatch } from 'react-redux'\r\nimport { store } from '../store'\r\nimport SocialSignInPanel from '../component/SocialSignInPanel'\r\n\r\nconst SignInPage: React.FC<PageProps> = props => {\r\n    const api = getApi(useDispatch())\r\n    const signInCompleted = async () => {\r\n      console.log(`Sign in completed, token: ${store.getState().token}`)\r\n      if (store.getState().token){\r\n        await api.perpetual()\r\n        api.flash(\"Sign-in is successful\")\r\n        props.history.push('/home')\r\n      }\r\n    }\r\n      return (\r\n        <Outline {...props}>\r\n          <p>\r\n            <SignInForm onCompleted={signInCompleted}/>\r\n          </p>\r\n          <p>\r\n            <SocialSignInPanel onCompleted={signInCompleted}/>\r\n          </p>\r\n        </Outline>\r\n    )\r\n}\r\n\r\nexport default SignInPage","import React from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { getApi } from '../api'\r\nimport { FormProps } from '..'\r\n\r\ninterface FormData {\r\n  email: string,\r\n  password: string,\r\n  name: string,\r\n}\r\n\r\nconst defaultFormData: FormData = {\r\n  email: '',\r\n  password: '',\r\n  name: '',\r\n}\r\n\r\nconst SignUpForm: React.FC<FormProps> = props => {\r\n  const api = getApi(useDispatch())\r\n  const [formData, setFormData] = React.useState<FormData>(defaultFormData)\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => setFormData({ ...formData, [e.target.name]: e.target.value })\r\n  const handleSubmit = async (e: React.SyntheticEvent) => {\r\n    e.preventDefault()\r\n    await api.signUp(formData.email, formData.password, formData.name)\r\n    api.flash(`An email has been sent to ${formData.email}`)\r\n    props.onCompleted()\r\n  }\r\n\r\n  return (\r\n    <form noValidate onSubmit={handleSubmit}>\r\n      <h1>Sign-up</h1>\r\n      <p>\r\n        <label>Username<br/>\r\n          <input name=\"email\" value={formData.email} onChange={handleChange} />\r\n        </label>\r\n      </p>\r\n      <p>\r\n        <label>Password<br/>\r\n          <input name=\"password\" value={formData.password} type=\"password\" onChange={handleChange} />\r\n        </label>\r\n      </p>\r\n      <p>\r\n        <label>Name<br/>\r\n          <input name=\"name\" value={formData.name} onChange={handleChange} />\r\n        </label>\r\n      </p>\r\n      <button type=\"submit\">Sign-up</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default SignUpForm","import React from 'react'\r\nimport { PageProps } from '..'\r\nimport Outline from './Outline'\r\nimport SignUpForm from '../component/SignUpForm'\r\n\r\nconst SignUpPage: React.FC<PageProps> = props => {\r\n  const signUpCompleted = async () => {\r\n    props.history.push('/home')\r\n  }\r\n  return (\r\n    <Outline {...props}>\r\n        <SignUpForm onCompleted={signUpCompleted}/>\r\n    </Outline>\r\n  )\r\n}\r\n\r\nexport default SignUpPage","import React from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { getApi } from '../api'\r\nimport { FormProps } from '..'\r\n\r\ninterface FormData {\r\n  newPassword: string,\r\n  newPasswordConfirmation: string,\r\n}\r\n\r\nconst defaultFormData: FormData = {\r\n  newPassword: '',\r\n  newPasswordConfirmation: ''\r\n}\r\n\r\nconst UpdatePasswordForm: React.FC<FormProps> = props => {\r\n  const api = getApi(useDispatch())\r\n  const [formData, setFormData] = React.useState<FormData>(defaultFormData)\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => setFormData({ ...formData, [e.target.name]: e.target.value })\r\n  const handleSubmit = async (e: React.SyntheticEvent) => {\r\n    e.preventDefault()\r\n    api.updatePassword(formData.newPassword, formData.newPasswordConfirmation)\r\n    props.onCompleted()\r\n  }\r\n\r\n  return (\r\n    <form noValidate onSubmit={handleSubmit}>\r\n      <h1>Update password</h1>\r\n      <p>\r\n        <label>New password<br/>\r\n          <input name=\"newPassword\" type=\"password\" value={formData.newPassword} onChange={handleChange} />\r\n        </label>\r\n      </p>\r\n      <p>\r\n        <label>New password confirmation<br/>\r\n          <input name=\"newPasswordConfirmation\" type=\"password\" value={formData.newPasswordConfirmation} onChange={handleChange} />\r\n        </label>\r\n      </p>\r\n      <button type=\"submit\">Update password</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default UpdatePasswordForm","import React from 'react'\r\nimport { PageProps } from '..'\r\nimport Outline from './Outline'\r\nimport UpdatePasswordForm from '../component/UpdatePasswordForm'\r\n\r\nconst UpdatePasswordPage: React.FC<PageProps> = props => {\r\n    return (\r\n      <Outline {...props}>\r\n          <UpdatePasswordForm onCompleted={() => undefined}/>\r\n      </Outline>\r\n    )\r\n}\r\n\r\nexport default UpdatePasswordPage","import React from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { getApi } from '../api'\r\nimport { FormProps } from '..'\r\n\r\ninterface FormData {\r\n  email: string,\r\n  password: string,\r\n}\r\n\r\nconst defaultFormData: FormData = {\r\n  email: '',\r\n  password: ''\r\n}\r\n\r\nconst ResetPasswordForm: React.FC<FormProps> = props => {\r\n  const api = getApi(useDispatch())\r\n  const [formData, setFormData] = React.useState<FormData>(defaultFormData)\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => setFormData({ ...formData, [e.target.name]: e.target.value })\r\n  const handleSubmit = async (e: React.SyntheticEvent) => {\r\n      e.preventDefault()\r\n      api.resetPassword(formData.email)\r\n      props.onCompleted()\r\n  }\r\n\r\n  return (\r\n    <form noValidate onSubmit={handleSubmit}>\r\n          <h1>Reset password</h1>\r\n          <p>\r\n            <label>Email<br/>\r\n              <input name=\"email\" value={formData.email} onChange={handleChange}/>\r\n            </label> \r\n          </p>\r\n          <button type=\"submit\">Reset password</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default ResetPasswordForm","import React from 'react'\r\nimport { PageProps } from '..'\r\nimport Outline from './Outline'\r\nimport ResetPasswordForm from '../component/ResetPasswordForm'\r\n\r\nconst ResetPasswordPage: React.FC<PageProps> = props => {\r\n    return (\r\n      <Outline {...props}>\r\n          <ResetPasswordForm onCompleted={() => undefined}/>\r\n      </Outline>\r\n    )\r\n}\r\n\r\nexport default ResetPasswordPage","import React from 'react'\r\nimport { Instruction, Perpetual } from '../domain'\r\n\r\ninterface Props {\r\n  instructions: Instruction[],\r\n  perpetual: Perpetual,\r\n}\r\n\r\nconst StatementTable: React.FC<Props> = props => {\r\n  const {perpetual: {currencies, account}, instructions} = props\r\n  return (\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th>Book #</th>\r\n          <th>Moment</th>\r\n          <th>Type</th>\r\n          <th>Counterparty</th>\r\n          {currencies.map(currency => {\r\n            return (\r\n              <th colSpan={2}>{currency.coin}</th>\r\n            )\r\n          })}\r\n          <th>Reference</th>\r\n        </tr>\r\n        <tr>\r\n          <th></th>\r\n          <th></th>\r\n          <th></th>\r\n          <th></th>\r\n          {currencies.map(currency => {\r\n            return (\r\n              <>\r\n                <th>DB</th>\r\n                <th>CR</th>\r\n              </>\r\n            )\r\n          })}\r\n          <th></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n      {instructions.map(instruction => {\r\n        return (\r\n          <tr>\r\n            <td>{instruction.bookId}</td>\r\n            <td>{instruction.booked}</td>\r\n            <td>{instruction.type}</td>\r\n            <td>{JSON.stringify(instruction.partyIds)}</td>\r\n            {currencies.map(currency => {\r\n              const rawAmount = instruction.amount[currency.coin] || 0\r\n              var dbAmount = rawAmount\r\n              var crAmount = 0\r\n              if (instruction.crId === account.id){\r\n                dbAmount = 0\r\n                crAmount = rawAmount\r\n              }\r\n              return (\r\n                <>\r\n                  <td className=\"amount\">{dbAmount !== 0 ? dbAmount.toFixed(2) : ''}</td>\r\n                  <td className=\"amount\">{crAmount !== 0 ? crAmount.toFixed(2) : ''}</td>\r\n                </>\r\n              )\r\n            })}\r\n            <td>{instruction.reference}</td>\r\n          </tr>\r\n        )\r\n      })}\r\n      </tbody>\r\n    </table>\r\n  )\r\n\r\n}\r\n\r\nexport default StatementTable","import React from 'react'\r\nimport Outline from './Outline'\r\nimport { PageProps } from '..'\r\nimport { getApi } from '../api'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { ApplicationState } from '../store'\r\nimport { Perpetual, Instruction } from '../domain'\r\nimport StatementTable from '../component/StatementTable'\r\n\r\nconst StatementPage: React.FC<PageProps> = props => {\r\n\tconst api = getApi(useDispatch())\r\n  const perpetual = useSelector<ApplicationState, Perpetual>(state => state.perpetual)\r\n\tconst instructions = useSelector<ApplicationState, Instruction[]>(state => state.instructions)\r\n\t// eslint-disable-next-line\r\n\tReact.useEffect(() => { api.statement() }, [])\r\n\treturn (\r\n\t\t<Outline {...props}>\r\n\t\t\t<h1>Account statement</h1>\r\n\t\t\t<p>\r\n\t\t\t\t<StatementTable perpetual={perpetual} instructions={instructions}/>\r\n\t\t\t</p>\r\n\t\t</Outline>\r\n\t);\r\n}\r\n\r\nexport default StatementPage","import React from 'react';\r\nimport './App.css';\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\nimport HomePage from './page/HomePage';\r\nimport TestPage from './page/TestPage';\r\nimport SignInPage from './page/SignInPage';\r\nimport SignUpPage from './page/SignUpPage';\r\nimport UpdatePasswordPage from './page/UpdatePasswordPage';\r\nimport ResetPasswordPage from './page/ResetPasswordPage';\r\nimport StatementPage from './page/StatementPage';\r\n\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route exact path=\"/\" component={HomePage} />\r\n        <Route path=\"/home\" component={HomePage} />\r\n        <Route path=\"/sign-in\" component={SignInPage} />\r\n        <Route path=\"/sign-up\" component={SignUpPage} />\r\n        <Route path=\"/update-password\" component={UpdatePasswordPage}/>\r\n        <Route path=\"/reset-password\" component={ResetPasswordPage}/>\r\n        <Route path=\"/statement\" component={StatementPage}/>\r\n        <Route path=\"/test\" component={TestPage} />\r\n        <Route render={() => (<div>No match</div>)} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceWorker'\r\nimport { RouteComponentProps } from 'react-router'\r\nimport { Provider } from 'react-redux'\r\nimport { store } from './store'\r\n\r\nexport interface PageProps extends RouteComponentProps {}\r\nexport interface FormProps {\r\n  onCompleted: () => void\r\n}\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}